<div class="title mb-2 strong d-flex align-items-center small text-muted text-uppercase">
    <span class="me-2">Comments ({{comments.length}})</span>
</div>

<div class="d-flex">
    <div class="small">
        <app-inline-member [showName]="false" [profile]="currentUser"></app-inline-member>
    </div>
    <div class="flex-grow-1 ms-2" (keyup.control.enter)="submit()">
        <app-md-editor [(ngModel)]="text"></app-md-editor>
        <div class="mt-2">
            <button class="btn btn-sm btn-outline-secondary"
                    [disabled]="isSavingInProgress || !text"
                    (click)="submit()"
            >Add comment</button>
        </div>
    </div>
</div>

<div *ngFor="let comment of comments" class="mt-4">
    <div class="d-flex small align-items-center">
        <app-inline-member class="me-2" [profile]="comment.author"></app-inline-member>
        <div class="opacity-75 small">
            commented {{comment.created | timeago}} {{ comment.edited ? ' (edited)' : ''}}
        </div>
        <div class="ms-auto"></div>
    </div>
    <div style="margin-left: 32px">
        <div *ngIf="comment.type === CardCommentType.Html" [innerHTML]="comment.text"></div>
        <div *ngIf="comment.type === CardCommentType.Markdown">
            <app-md-viewer [ngModel]="comment.text" [hideBorder]="true"></app-md-viewer>
        </div>
    </div>
</div>